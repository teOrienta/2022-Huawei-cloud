<main>
  <app-navbar></app-navbar>
  <div class="content">
    <p-card header="Filters">
      <div class="filter-div">
        <div [formGroup]="form" class="filter-div">
          <p-calendar
            [style]="{ width: '200px' }"
            [showIcon]="true"
            dateFormat="dd/mm/yy"
            [readonlyInput]="true"
            placeholder="Start date"
            formControlName="startDate"
            [maxDate]="maxDate"
            (onSelect)="updateFlow()"
          ></p-calendar>

          <p-calendar
            [style]="{ width: '200px' }"
            [showIcon]="true"
            dateFormat="dd/mm/yy"
            [readonlyInput]="true"
            placeholder="Final date"
            formControlName="endDate"
            [maxDate]="maxDate"
            (onSelect)="updateFlow()"
          ></p-calendar>

          <div [formGroup]="form">
            <h4>Analysis</h4>
            <p-dropdown
              (onSelect)="updateFlow()"
              [style]="{ width: '100%' }"
              [options]="analysis"
              placeholder="Select the analysis"
              formControlName="analysis"
            ></p-dropdown>
          </div>

          <div>
            <h4>Detail level: {{ detailLevel }}</h4>
            <p-slider
              [style]="{ width: '200px' }"
              formControlName="detailLevel"
              [max]="5"
              [step]="1"
              [(ngModel)]="detailLevel"
              (onSlideEnd)="updateFlow()"
            ></p-slider>
          </div>
        </div>

        <div>
          <h4>Mode</h4>
          <p-selectButton
            [options]="[
              { label: 'Performance', value: 'performance' },
              { label: 'Frequency', value: 'frequency' }
            ]"
            optionLabel="label"
            optionValue="value"
            [(ngModel)]="mode"
            (onOptionClick)="changeMode(mode)"
          ></p-selectButton>
        </div>

        <div class="filter-statistics">
          <span>Cases: {{ statistics.cases }}</span>
          <span>Case duration: {{ statistics.averageCaseDuration }} </span>

          <span>Activities: {{ statistics.activities }}</span>
          <span
            >Activity duration: {{ statistics.averageActivityDuration }}</span
          >
        </div>
      </div>
    </p-card>
    <app-flow [graphSource]="graphSource" style="flex: 1"></app-flow>
    <app-footer></app-footer>
  </div>
</main>
